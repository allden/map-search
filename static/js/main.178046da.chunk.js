(this["webpackJsonpmap-search"]=this["webpackJsonpmap-search"]||[]).push([[0],{19:function(e,t){e.exports="data:image/png;base64,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"},20:function(e,t){e.exports="data:image/png;base64,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"},25:function(e,t,a){e.exports=a(35)},34:function(e,t,a){},35:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(13),c=a.n(o),l=a(7),i=a.n(l),s=a(18),u=a(8),m=a(9),h=a(11),f=a(10),p=a(37),d=a(39),v=a(40),g=a(41),E=a(38),A=a(5),b=a.n(A),w=(a(31),a(19)),y=a.n(w),C=a(20),D=a.n(C),x=b.a.icon({iconUrl:y.a,iconRetinaUrl:y.a,iconAnchor:null,shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:[30,45],className:"marker.png"}),j=b.a.icon({iconUrl:D.a,iconRetinaUrl:D.a,iconAnchor:null,shadowUrl:null,shadowSize:null,shadowAnchor:null,iconSize:[30,45],className:"marker_alt.png"});var k=function(e){var t=e.lat,a=e.long,n=e.zoom,o=e.places,c=e.nearest,l=e.queryError,i=l?r.a.createElement("div",{className:"message absolute top-center index-top"},l):null,s=[t,a],u=o.length>0?o.map((function(e){var t=e.venue,a=t.name,n=t.location,o=function(e){var t=e.venue.location;return[t.lat,t.lng]}(e),l=function(e){return e.venue.location.formattedAddress.join(", ")}(e),i=function(e){var t=function(e){return(.000621371192*e).toFixed(2)}(e);return{kilometers:function(e){return(.001*e).toFixed(2)}(e),miles:t}}(n.distance),s=c.referralId===e.referralId;return r.a.createElement(p.a,{icon:s?j:x,position:o,key:e.referralId},r.a.createElement(d.a,null,r.a.createElement("div",{className:"popup"},r.a.createElement("h3",null,a),r.a.createElement("p",null,l),r.a.createElement("p",null,i.kilometers,"km / ",i.miles,"mi away."))))})):null;return r.a.createElement(v.a,{center:s,zoom:n,style:{flexGrow:1}},r.a.createElement(g.a,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),r.a.createElement(E.a,{center:s,radius:100}),u,i)},S=a(24),N=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onChangeHandler=function(e){var t=e.target,a=t.id,r=t.value;n.setState(Object(S.a)({},a,r))},n.onSubmitHandler=function(e){var t=n.state.search,a=n.state.location;e.preventDefault(),n.props.fetchPlacesData(t,a)},n.state={search:"",location:""},n}return Object(m.a)(a,[{key:"render",value:function(){var e=this.state,t=e.location,a=e.search;return r.a.createElement("div",{onSubmit:this.onSubmitHandler,className:"form-container d-grid py-1"},r.a.createElement("form",{id:"search-form",className:"d-flex flex-column justify-self w-75 p-1"},r.a.createElement("input",{onChange:this.onChangeHandler,value:t,type:"text",id:"location",placeholder:"e.g. st Fake Street, Manchester, UK (Optional)"}),r.a.createElement("input",{onChange:this.onChangeHandler,value:a,type:"text",id:"search",placeholder:"Point of Interest: e.g. Cafe"}),r.a.createElement("button",{className:"btn btn-primary"},"Search")))}}]),a}(n.Component),U=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).refreshTime=function(){var e=(new Date).toLocaleString("en-US");n.setState({currentTime:new Date(e)})},n.interval="",n.state={currentTime:new Date((new Date).toLocaleString("en-US"))},n}return Object(m.a)(a,[{key:"formatTemp",value:function(e,t){switch(t){case"metric":return"".concat(e).concat(String.fromCharCode(176),"C")}}},{key:"formatDate",value:function(e){return new Date(1e3*e)||new Date}},{key:"convertToLocale",value:function(e){return e.toLocaleString("en-US")}},{key:"getTime",value:function(e){var t=this.prependZero(e.getHours()),a=this.prependZero(e.getMinutes()),n=this.prependZero(e.getSeconds());return"".concat(t,":").concat(a,":").concat(n)}},{key:"prependZero",value:function(e){return e<10?"0"+e:e}},{key:"convertToKilometers",value:function(e){return(.001*e).toFixed(2)}},{key:"convertToMiles",value:function(e){return(.000621371192*e).toFixed(2)}},{key:"capitalizeText",value:function(e){return e.toUpperCase()}},{key:"componentDidMount",value:function(){this.interval=setInterval(this.refreshTime,1e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this.props.weather.current||{},t=e.sunrise,a=e.sunset,n=e.temp,o=e.feels_like,c=e.visibility,l=e.humidity,i=e.wind_deg,s=e.wind_speed,u=e.weather,m=this.props.location,h=m.country,f=m.road,p=m.city,d=m.town,v=this.props.units,g=this.state.currentTime;return this.props.weather&&this.props.location?r.a.createElement("div",{id:"weather-container"},r.a.createElement("div",{id:"weather",className:"text-center gradient text-light p-bal"},r.a.createElement("h3",{className:"m-0 display-2"},f?f+", ":"",p||d?p+", "||!1:"",h),r.a.createElement("h4",{className:"m-0"},u?this.capitalizeText(u[0].description):this.capitalizeText("no data available")),r.a.createElement("p",{className:"display-3 m-0"},this.getTime(g)),r.a.createElement("hr",{className:"border-bottom border-light w-90"}),r.a.createElement("ul",{className:"list-unstyled d-grid",id:"weather-data"},r.a.createElement("li",null,r.a.createElement("b",null,"Temperature"),": ",this.formatTemp(n,v)),r.a.createElement("li",null,r.a.createElement("b",null,"Feels Like"),":",this.formatTemp(o,v)),r.a.createElement("li",null,r.a.createElement("b",null,"Wind Direction"),": ",i,"\xb0"),r.a.createElement("li",null,r.a.createElement("b",null,"Wind Speed"),": ",s,"m/s"),r.a.createElement("li",null,r.a.createElement("b",null,"Humidity"),": ",l,"%"),r.a.createElement("li",null,r.a.createElement("b",null,"Visibility"),": ",this.convertToKilometers(c),"km"),r.a.createElement("li",null,r.a.createElement("b",null,"Sunrise"),": ",this.getTime(this.formatDate(t))),r.a.createElement("li",null,r.a.createElement("b",null,"Sunset"),": ",this.getTime(this.formatDate(a)))))):null}}]),a}(n.Component);var H=function(){return r.a.createElement("nav",{id:"navigation",className:"nav d-flex flex-row justify-center"},r.a.createElement("i",{className:"fas fa-map-marked-alt fa-2x text-primary"}),r.a.createElement("div",{className:"display-4 ml-1"},r.a.createElement("b",null,"Navigator")))},P=function(e){Object(h.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(u.a)(this,a),(e=t.call(this)).componentDidMount=Object(s.a)(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchGeoData().then((function(){e.fetchGeoDataNavigator()}));case 2:case"end":return t.stop()}}),t)}))),e.success=function(){var t=Object(s.a)(i.a.mark((function t(a){var n,r,o,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=a.coords,r=n.latitude,o=n.longitude,t.next=4,e.reverseGeoCode({lat:r,long:o});case 4:c=t.sent,e.setState({lat:r,long:o,location:c},e.setStateCallback);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.error=function(t){e.fetchGeoData()},e.getNearest=function(e){for(var t="",a=Number.POSITIVE_INFINITY,n=0;n<e.length;n++){var r=e[n],o=r.venue.location.distance;o<a&&(a=o,t=r)}return t},e.fetchWeatherData=function(){var t=e.state,a=t.lat,n=t.long,r=t.units,o="https://infinite-dusk-92659.herokuapp.com/openweathermap/?lat=".concat(a,"&lon=").concat(n,"&exclude=hourly,daily,minutely&units=").concat(r);return fetch(o).then((function(e){return e.json()})).then((function(t){return e.setState({weather:t})}))},e.fetchGeoDataNavigator=function(){navigator.geolocation.getCurrentPosition(e.success,e.error)},e.fetchGeoData=function(){return fetch("https://infinite-dusk-92659.herokuapp.com/iplookup").then((function(e){return e.json()})).then((function(t){var a,n,r=[t.ll[0],t.ll[1]];return a=r[0],n=r[1],e.setState({lat:a,long:n,location:t},(function(){return e.setStateCallback()}))}))},e.setStateCallback=function(){return e.fetchWeatherData()},e.fetchPlacesData=function(t,a){var n=e.state.location,r=n.country,o=n.road,c=n.city,l="".concat(o?o+", ":"").concat(c,", ").concat(r);a&&a!==l?e.forwardGeoCode(a,(function(){return e.fetchPlacesRequest(t)})):e.fetchPlacesRequest(t)},e.fetchPlacesRequest=function(t){var a=e.state,n=a.limit,r=a.lat,o=a.long,c="".concat(r,",").concat(o),l="https://infinite-dusk-92659.herokuapp.com/foursquare/?&ll=".concat(c,"&query=").concat(t,"&v=20180323&limit=").concat(n);fetch(l).then((function(e){return e.json()})).then(function(){var t=Object(s.a)(i.a.mark((function t(a){var n,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=a?a.response.groups[0].items:[]).length>0?(r=e.getNearest(n),e.setState({queryError:"",places:n,nearest:r})):e.setState({queryError:"There were no results for your search."});case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},e.state={limit:10,lat:"",long:"",places:[],nearest:"",weather:"",location:"",units:"metric",queryError:""},e}return Object(m.a)(a,[{key:"reverseGeoCode",value:function(e){var t=e.lat,a=e.long,n="https://infinite-dusk-92659.herokuapp.com/opencagedata/?q=".concat(t,",").concat(a,"+");return fetch(n).then((function(e){return e.json()})).then((function(e){return e.results[0].components}))}},{key:"forwardGeoCode",value:function(e,t){var a=this,n=e.trim().replace(/\s/g,"+"),r="https://infinite-dusk-92659.herokuapp.com/opencagedata/?q=".concat(n);fetch(r).then((function(e){return e.json()})).then((function(e){var n=e.results[0];if(n){var r=n.components,o=n.geometry,c=o.lat,l=o.lng;t?a.setState({lat:c,long:l,location:r},t):a.setState({lat:c,long:l,location:r})}}))}},{key:"render",value:function(){var e=this.state,t=e.lat,a=e.long,n=e.places,o=e.nearest,c=e.weather,l=e.location,i=e.units,s=e.queryError;return t&&a?r.a.createElement("div",{id:"main-container",className:"vh-100 d-flex flex-column"},r.a.createElement(H,null),r.a.createElement(N,{fetchPlacesData:this.fetchPlacesData}),r.a.createElement(k,{lat:t,long:a,zoom:"12",places:n,nearest:o,queryError:s}),r.a.createElement(U,{weather:c,location:l,units:i})):r.a.createElement("div",{className:"d-flex vh-100 flex-column"},r.a.createElement(H,null),r.a.createElement("div",{className:"loading-screen d-grid flex-grow-1"},r.a.createElement("div",{className:"content align-self justify-self d-flex align-center justify-center flex-column"},r.a.createElement("div",{className:"loader"}),r.a.createElement("h3",{className:"text-center display-1"},"Loading..."))))}}]),a}(n.Component);a(34);c.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[25,1,2]]]);
//# sourceMappingURL=main.178046da.chunk.js.map